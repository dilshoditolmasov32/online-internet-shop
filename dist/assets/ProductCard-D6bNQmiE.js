import{i as v,r as t,a as k,j as e,b as w,J as P,I as f,L as h,K as y,H as x,M as b}from"./index-CpT6OhvX.js";const L=(s={})=>({...s,locale:v.language}),B=(s={})=>{const n=t.useRef(s),[i,r]=t.useState([]),[_,c]=t.useState(!1),[p,o]=t.useState(null),[l,d]=t.useState(s.page||1),[u,C]=t.useState(null),[N,j]=t.useState(null),g=t.useMemo(()=>L({...n.current,page:l}),[l,v.language]);return t.useEffect(()=>{let m=!0;return(async()=>{c(!0),o(null);try{const a=await k.get("/products/",{params:g});if(console.log(a.data.results),!m)return;r(a.data??[]),C(a.data.next??null),j(a.data.previous??null)}catch(a){if(!m)return;o((a==null?void 0:a.message)||"Nomaâ€™lum xatolik")}finally{m&&c(!1)}})(),()=>{m=!1}},[g]),{products:i,loading:_,error:p,pagination:{page:l,canNext:!!u,canPrev:!!N,setPage:d}}};function E({count:s=12}){const n=Array(s).fill(0);return e.jsx("div",{className:"container",children:e.jsx("div",{className:"skeleton__wrapper",children:n.map((i,r)=>e.jsxs("div",{className:"skeleton__card",children:[e.jsx("div",{className:"skeleton__image skeleton__anime"}),e.jsx("div",{className:"skeleton__title skeleton__anime"}),e.jsx("div",{className:"skeleton__price skeleton__anime"})]},r))})})}const S="/assets/product-DsYNHieX.svg",M="data:image/svg+xml,%3csvg%20width='22'%20height='22'%20viewBox='0%200%2022%2022'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M0%201.10002C0%200.4925%200.4925%200%201.10002%200H4.05601C4.57688%200%205.02635%200.36532%205.1328%200.8752L5.86874%204.40007H19.8003C21.0154%204.40007%2022.0004%205.38506%2022.0004%206.60011V11.3577C22.0004%2012.3992%2021.2702%2013.2979%2020.2507%2013.5112L8.29709%2016.0113C7.1077%2016.26%205.94187%2015.4975%205.69321%2014.308L3.16193%202.20004H1.10002C0.4925%202.20004%200%201.70754%200%201.10002ZM7.61866%2012.7815C7.74285%2013.3763%208.3258%2013.7578%208.9206%2013.6335L18.9255%2011.5416C19.4351%2011.435%2019.8003%2010.9855%2019.8003%2010.4648V7.70012C19.8003%207.09261%2019.3078%206.60011%2018.7003%206.60011H6.32807L7.61866%2012.7815Z'%20fill='white'/%3e%3cpath%20d='M7.00003%2021.9999C8.10462%2021.9999%209.0001%2021.1045%209.0001%2019.9999C9.0001%2018.8953%208.10462%2017.9999%207.00003%2017.9999C5.89544%2017.9999%205%2018.8953%205%2019.9999C5%2021.1045%205.89544%2021.9999%207.00003%2021.9999Z'%20fill='white'/%3e%3cpath%20d='M17%2021.9999C18.1046%2021.9999%2019.0001%2021.1045%2019.0001%2019.9999C19.0001%2018.8953%2018.1046%2017.9999%2017%2017.9999C15.8954%2017.9999%2015%2018.8953%2015%2019.9999C15%2021.1045%2015.8954%2021.9999%2017%2021.9999Z'%20fill='white'/%3e%3c/svg%3e";function Z({info:s,addToCart:n}){var l,d;const{t:i}=w(),r=P(),c=f(u=>u.cart.status)==="loading";if(!s)return null;const p=async()=>{if(!c)try{r(y({product_id:s.id,quantity:1})),x.success("Mahsulot savatchaga qo'shildi"),await r(b({product_id:s.id,quantity:1})).unwrap()}catch{x.error("Xatolik yuz berdi")}},o=((d=(l=s.images)==null?void 0:l[0])==null?void 0:d.original_image_url)||S;return e.jsxs("div",{className:"product__main",children:[e.jsxs("div",{className:"product__wrap",children:[e.jsx(h,{to:`/product/${s.id}`,className:"product__img",children:e.jsx("img",{src:o,alt:s.name})}),e.jsxs("div",{className:"product__desc",children:[e.jsx("p",{className:"product__desc-title",children:(s==null?void 0:s.name)||"Nomsiz mahsulot"})," "]})]}),e.jsxs("div",{className:"product__desc-btns",children:[e.jsx(h,{to:`/product/${s.id}`,className:"product__desc-btns__buy",children:i("buyBtn")}),e.jsx("button",{onClick:p,disabled:c,className:`product__desc-btns__basket ${c?"loading":""}`,children:c?e.jsx("div",{className:"spinner"}):e.jsx("img",{src:M})})]})]})}export{Z as P,E as S,B as u,L as w};
