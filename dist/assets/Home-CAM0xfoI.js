import{a as X,r as T,j as n,u as J,b as Y,L as R,i as K}from"./index-CpT6OhvX.js";import{m as B,e as W,a as G,c as Z,b as ee,g as H,S as ae,N as te,d as se,f as ie,P as Q}from"./Products-PbGdrfS6.js";import{w as ne,P as le}from"./ProductCard-D6bNQmiE.js";function F(u){return u===void 0&&(u=""),`.${u.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function re(u){let{swiper:e,extendParams:h,on:l,emit:i}=u;const r="swiper-pagination";h({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:a=>a,formatFractionTotal:a=>a,bulletClass:`${r}-bullet`,bulletActiveClass:`${r}-bullet-active`,modifierClass:`${r}-`,currentClass:`${r}-current`,totalClass:`${r}-total`,hiddenClass:`${r}-hidden`,progressbarFillClass:`${r}-progressbar-fill`,progressbarOppositeClass:`${r}-progressbar-opposite`,clickableClass:`${r}-clickable`,lockClass:`${r}-lock`,horizontalClass:`${r}-horizontal`,verticalClass:`${r}-vertical`,paginationDisabledClass:`${r}-disabled`}}),e.pagination={el:null,bullets:[]};let d,C=0;function D(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function x(a,t){const{bulletActiveClass:s}=e.params.pagination;a&&(a=a[`${t==="prev"?"previous":"next"}ElementSibling`],a&&(a.classList.add(`${s}-${t}`),a=a[`${t==="prev"?"previous":"next"}ElementSibling`],a&&a.classList.add(`${s}-${t}-${t}`)))}function L(a,t,s){if(a=a%s,t=t%s,t===a+1)return"next";if(t===a-1)return"previous"}function A(a){const t=a.target.closest(F(e.params.pagination.bulletClass));if(!t)return;a.preventDefault();const s=G(t)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===s)return;const o=L(e.realIndex,s,e.slides.length);o==="next"?e.slideNext():o==="previous"?e.slidePrev():e.slideToLoop(s)}else e.slideTo(s)}function S(){const a=e.rtl,t=e.params.pagination;if(D())return;let s=e.pagination.el;s=B(s);let o,m;const j=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,M=e.params.loop?Math.ceil(j/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(m=e.previousRealIndex||0,o=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(o=e.snapIndex,m=e.previousSnapIndex):(m=e.previousIndex||0,o=e.activeIndex||0),t.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const c=e.pagination.bullets;let g,v,I;if(t.dynamicBullets&&(d=W(c[0],e.isHorizontal()?"width":"height"),s.forEach(f=>{f.style[e.isHorizontal()?"width":"height"]=`${d*(t.dynamicMainBullets+4)}px`}),t.dynamicMainBullets>1&&m!==void 0&&(C+=o-(m||0),C>t.dynamicMainBullets-1?C=t.dynamicMainBullets-1:C<0&&(C=0)),g=Math.max(o-C,0),v=g+(Math.min(c.length,t.dynamicMainBullets)-1),I=(v+g)/2),c.forEach(f=>{const y=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(b=>`${t.bulletActiveClass}${b}`)].map(b=>typeof b=="string"&&b.includes(" ")?b.split(" "):b).flat();f.classList.remove(...y)}),s.length>1)c.forEach(f=>{const y=G(f);y===o?f.classList.add(...t.bulletActiveClass.split(" ")):e.isElement&&f.setAttribute("part","bullet"),t.dynamicBullets&&(y>=g&&y<=v&&f.classList.add(...`${t.bulletActiveClass}-main`.split(" ")),y===g&&x(f,"prev"),y===v&&x(f,"next"))});else{const f=c[o];if(f&&f.classList.add(...t.bulletActiveClass.split(" ")),e.isElement&&c.forEach((y,b)=>{y.setAttribute("part",b===o?"bullet-active":"bullet")}),t.dynamicBullets){const y=c[g],b=c[v];for(let _=g;_<=v;_+=1)c[_]&&c[_].classList.add(...`${t.bulletActiveClass}-main`.split(" "));x(y,"prev"),x(b,"next")}}if(t.dynamicBullets){const f=Math.min(c.length,t.dynamicMainBullets+4),y=(d*f-d)/2-I*d,b=a?"right":"left";c.forEach(_=>{_.style[e.isHorizontal()?b:"top"]=`${y}px`})}}s.forEach((c,g)=>{if(t.type==="fraction"&&(c.querySelectorAll(F(t.currentClass)).forEach(v=>{v.textContent=t.formatFractionCurrent(o+1)}),c.querySelectorAll(F(t.totalClass)).forEach(v=>{v.textContent=t.formatFractionTotal(M)})),t.type==="progressbar"){let v;t.progressbarOpposite?v=e.isHorizontal()?"vertical":"horizontal":v=e.isHorizontal()?"horizontal":"vertical";const I=(o+1)/M;let f=1,y=1;v==="horizontal"?f=I:y=I,c.querySelectorAll(F(t.progressbarFillClass)).forEach(b=>{b.style.transform=`translate3d(0,0,0) scaleX(${f}) scaleY(${y})`,b.style.transitionDuration=`${e.params.speed}ms`})}t.type==="custom"&&t.renderCustom?(c.innerHTML=t.renderCustom(e,o+1,M),g===0&&i("paginationRender",c)):(g===0&&i("paginationRender",c),i("paginationUpdate",c)),e.params.watchOverflow&&e.enabled&&c.classList[e.isLocked?"add":"remove"](t.lockClass)})}function N(){const a=e.params.pagination;if(D())return;const t=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let s=e.pagination.el;s=B(s);let o="";if(a.type==="bullets"){let m=e.params.loop?Math.ceil(t/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&m>t&&(m=t);for(let j=0;j<m;j+=1)a.renderBullet?o+=a.renderBullet.call(e,j,a.bulletClass):o+=`<${a.bulletElement} ${e.isElement?'part="bullet"':""} class="${a.bulletClass}"></${a.bulletElement}>`}a.type==="fraction"&&(a.renderFraction?o=a.renderFraction.call(e,a.currentClass,a.totalClass):o=`<span class="${a.currentClass}"></span> / <span class="${a.totalClass}"></span>`),a.type==="progressbar"&&(a.renderProgressbar?o=a.renderProgressbar.call(e,a.progressbarFillClass):o=`<span class="${a.progressbarFillClass}"></span>`),e.pagination.bullets=[],s.forEach(m=>{a.type!=="custom"&&(m.innerHTML=o||""),a.type==="bullets"&&e.pagination.bullets.push(...m.querySelectorAll(F(a.bulletClass)))}),a.type!=="custom"&&i("paginationRender",s[0])}function $(){e.params.pagination=Z(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const a=e.params.pagination;if(!a.el)return;let t;typeof a.el=="string"&&e.isElement&&(t=e.el.querySelector(a.el)),!t&&typeof a.el=="string"&&(t=[...document.querySelectorAll(a.el)]),t||(t=a.el),!(!t||t.length===0)&&(e.params.uniqueNavElements&&typeof a.el=="string"&&Array.isArray(t)&&t.length>1&&(t=[...e.el.querySelectorAll(a.el)],t.length>1&&(t=t.find(s=>ee(s,".swiper")[0]===e.el))),Array.isArray(t)&&t.length===1&&(t=t[0]),Object.assign(e.pagination,{el:t}),t=B(t),t.forEach(s=>{a.type==="bullets"&&a.clickable&&s.classList.add(...(a.clickableClass||"").split(" ")),s.classList.add(a.modifierClass+a.type),s.classList.add(e.isHorizontal()?a.horizontalClass:a.verticalClass),a.type==="bullets"&&a.dynamicBullets&&(s.classList.add(`${a.modifierClass}${a.type}-dynamic`),C=0,a.dynamicMainBullets<1&&(a.dynamicMainBullets=1)),a.type==="progressbar"&&a.progressbarOpposite&&s.classList.add(a.progressbarOppositeClass),a.clickable&&s.addEventListener("click",A),e.enabled||s.classList.add(a.lockClass)}))}function P(){const a=e.params.pagination;if(D())return;let t=e.pagination.el;t&&(t=B(t),t.forEach(s=>{s.classList.remove(a.hiddenClass),s.classList.remove(a.modifierClass+a.type),s.classList.remove(e.isHorizontal()?a.horizontalClass:a.verticalClass),a.clickable&&(s.classList.remove(...(a.clickableClass||"").split(" ")),s.removeEventListener("click",A))})),e.pagination.bullets&&e.pagination.bullets.forEach(s=>s.classList.remove(...a.bulletActiveClass.split(" ")))}l("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const a=e.params.pagination;let{el:t}=e.pagination;t=B(t),t.forEach(s=>{s.classList.remove(a.horizontalClass,a.verticalClass),s.classList.add(e.isHorizontal()?a.horizontalClass:a.verticalClass)})}),l("init",()=>{e.params.pagination.enabled===!1?E():($(),N(),S())}),l("activeIndexChange",()=>{typeof e.snapIndex>"u"&&S()}),l("snapIndexChange",()=>{S()}),l("snapGridLengthChange",()=>{N(),S()}),l("destroy",()=>{P()}),l("enable disable",()=>{let{el:a}=e.pagination;a&&(a=B(a),a.forEach(t=>t.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),l("lock unlock",()=>{S()}),l("click",(a,t)=>{const s=t.target,o=B(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&o&&o.length>0&&!s.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&s===e.navigation.nextEl||e.navigation.prevEl&&s===e.navigation.prevEl))return;const m=o[0].classList.contains(e.params.pagination.hiddenClass);i(m===!0?"paginationShow":"paginationHide"),o.forEach(j=>j.classList.toggle(e.params.pagination.hiddenClass))}});const O=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:a}=e.pagination;a&&(a=B(a),a.forEach(t=>t.classList.remove(e.params.pagination.paginationDisabledClass))),$(),N(),S()},E=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:a}=e.pagination;a&&(a=B(a),a.forEach(t=>t.classList.add(e.params.pagination.paginationDisabledClass))),P()};Object.assign(e.pagination,{enable:O,disable:E,render:N,update:S,init:$,destroy:P})}function oe(u){let{swiper:e,extendParams:h,on:l,emit:i,params:r}=u;e.autoplay={running:!1,paused:!1,timeLeft:0},h({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let d,C,D=r&&r.autoplay?r.autoplay.delay:3e3,x=r&&r.autoplay?r.autoplay.delay:3e3,L,A=new Date().getTime(),S,N,$,P,O,E,a;function t(p){!e||e.destroyed||!e.wrapperEl||p.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",t),!(a||p.detail&&p.detail.bySwiperTouchMove)&&g())}const s=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?S=!0:S&&(x=L,S=!1);const p=e.autoplay.paused?L:A+x-new Date().getTime();e.autoplay.timeLeft=p,i("autoplayTimeLeft",p,p/D),C=requestAnimationFrame(()=>{s()})},o=()=>{let p;return e.virtual&&e.params.virtual.enabled?p=e.slides.find(w=>w.classList.contains("swiper-slide-active")):p=e.slides[e.activeIndex],p?parseInt(p.getAttribute("data-swiper-autoplay"),10):void 0},m=p=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(C),s();let k=typeof p>"u"?e.params.autoplay.delay:p;D=e.params.autoplay.delay,x=e.params.autoplay.delay;const w=o();!Number.isNaN(w)&&w>0&&typeof p>"u"&&(k=w,D=w,x=w),L=k;const z=e.params.speed,q=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(z,!0,!0),i("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,z,!0,!0),i("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(z,!0,!0),i("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,z,!0,!0),i("autoplay")),e.params.cssMode&&(A=new Date().getTime(),requestAnimationFrame(()=>{m()})))};return k>0?(clearTimeout(d),d=setTimeout(()=>{q()},k)):requestAnimationFrame(()=>{q()}),k},j=()=>{A=new Date().getTime(),e.autoplay.running=!0,m(),i("autoplayStart")},M=()=>{e.autoplay.running=!1,clearTimeout(d),cancelAnimationFrame(C),i("autoplayStop")},c=(p,k)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(d),p||(E=!0);const w=()=>{i("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",t):g()};if(e.autoplay.paused=!0,k){O&&(L=e.params.autoplay.delay),O=!1,w();return}L=(L||e.params.autoplay.delay)-(new Date().getTime()-A),!(e.isEnd&&L<0&&!e.params.loop)&&(L<0&&(L=0),w())},g=()=>{e.isEnd&&L<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(A=new Date().getTime(),E?(E=!1,m(L)):m(),e.autoplay.paused=!1,i("autoplayResume"))},v=()=>{if(e.destroyed||!e.autoplay.running)return;const p=H();p.visibilityState==="hidden"&&(E=!0,c(!0)),p.visibilityState==="visible"&&g()},I=p=>{p.pointerType==="mouse"&&(E=!0,a=!0,!(e.animating||e.autoplay.paused)&&c(!0))},f=p=>{p.pointerType==="mouse"&&(a=!1,e.autoplay.paused&&g())},y=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",I),e.el.addEventListener("pointerleave",f))},b=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",I),e.el.removeEventListener("pointerleave",f))},_=()=>{H().addEventListener("visibilitychange",v)},U=()=>{H().removeEventListener("visibilitychange",v)};l("init",()=>{e.params.autoplay.enabled&&(y(),_(),j())}),l("destroy",()=>{b(),U(),e.autoplay.running&&M()}),l("_freeModeStaticRelease",()=>{($||E)&&g()}),l("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?M():c(!0,!0)}),l("beforeTransitionStart",(p,k,w)=>{e.destroyed||!e.autoplay.running||(w||!e.params.autoplay.disableOnInteraction?c(!0,!0):M())}),l("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){M();return}N=!0,$=!1,E=!1,P=setTimeout(()=>{E=!0,$=!0,c(!0)},200)}}),l("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!N)){if(clearTimeout(P),clearTimeout(d),e.params.autoplay.disableOnInteraction){$=!1,N=!1;return}$&&e.params.cssMode&&g(),$=!1,N=!1}}),l("slideChange",()=>{e.destroyed||!e.autoplay.running||(O=!0)}),Object.assign(e.autoplay,{start:j,stop:M,pause:c,resume:g})}const ce=async(u="ru")=>{var e;try{const l=(await X.get("theme/customizations")).data.data.find(d=>d.type==="image_carousel");if(!l)return[];const i=l.translations.find(d=>d.locale===u);return(((e=i==null?void 0:i.options)==null?void 0:e.images)||l.options.images).map(d=>({...d,image:`https://shop.milliybiz.uz/${d.image}`}))}catch(h){return console.error("Carousel error:",h),[]}},pe=(u="ru")=>{const[e,h]=T.useState([]),[l,i]=T.useState(!0);return T.useEffect(()=>{i(!0),ce(u).then(r=>h(r)).finally(()=>i(!1))},[u]),{images:e,loading:l}},ue=()=>n.jsx("div",{className:"container",children:n.jsxs("div",{className:"banner-skeleton",children:[n.jsx("div",{className:"banner-skeleton__title"}),n.jsx("div",{className:"banner-skeleton__text"}),n.jsx("div",{className:"banner-skeleton__button"})]})});function V({lang:u="ru"}){const{images:e,loading:h}=pe(u),[l,i]=T.useState(!0);return T.useEffect(()=>{const r=setInterval(()=>{h||(i(!1),clearInterval(r))},2500);return()=>clearInterval(r)},[h]),l?n.jsx(ue,{}):n.jsx("a",{href:"/products",className:"container",children:n.jsx(ae,{modules:[oe,te,re],spaceBetween:50,slidesPerView:1,autoplay:{delay:2e3,disableOnInteraction:!1},loop:!0,pagination:{clickable:!0},className:"slide",children:e.map((r,d)=>n.jsx(se,{children:n.jsx("div",{className:"relative h-[400px]",children:n.jsx("img",{src:r.image,alt:r.title,className:"w-full h-full object-cover"})})},d))})})}function de(){var l;const{categories:u}=J(),{t:e,i18n:h}=Y();return console.log(u,"categoru"),n.jsxs("div",{className:"categories",children:[n.jsx("div",{className:"container",children:n.jsxs("div",{className:"categories__top",children:[n.jsxs("h2",{className:"categories__title",children:[e("categ"),"."]}),n.jsxs("div",{className:"categories__txt",children:[n.jsx(R,{to:"/products",className:"link",children:n.jsxs("p",{className:"categories__text",children:[e("all")," "]})}),n.jsx("img",{src:ie,alt:"arrow-icon"})]})]})}),n.jsx("div",{className:"container",children:n.jsx("div",{className:"categories__wrap",children:(l=u==null?void 0:u.slice(0,4))==null?void 0:l.map(i=>n.jsx(R,{to:"/products",className:"card",children:n.jsx("div",{className:"card__wrap",children:n.jsxs("div",{className:"card__desc",children:[n.jsx("h3",{className:"card__desc-title",children:i==null?void 0:i.name}),n.jsx("p",{dangerouslySetInnerHTML:{__html:i==null?void 0:i.description}})]})})},i.id))})})]})}const fe=(u={})=>X.get("/news/",{params:u}),me=()=>{const[u,e]=T.useState([]),[h,l]=T.useState(!1),[i,r]=T.useState(null),d=T.useMemo(()=>ne(),[K.language]);return T.useEffect(()=>{let C=!0;return(async()=>{l(!0),r(null);try{const x=await fe(d);if(!C)return;e(x.data.results??x.data)}catch{if(!C)return;r("News yuklanmadi")}finally{C&&l(!1)}})(),()=>{C=!1}},[d]),{news:u,loading:h,error:i}};function ve(){const[u,e]=T.useState(""),{t:h,i18n:l}=Y(),{news:i}=me();return n.jsxs(n.Fragment,{children:[n.jsx(le,{searchQuery:u}),n.jsx(V,{lang:"ru"}),n.jsx(de,{}),n.jsx(Q,{title:h("allProds")}),n.jsx(V,{info:i,type:"second"}),n.jsx(Q,{title:h("specialOffer")})]})}export{ve as default};
