import{N as u,b as p,j as e,J as C,I as j,r as f,O as y,P as v,Q as k,S as N,H as b}from"./index-CpT6OhvX.js";import{N as w}from"./Nav-DrAwb5Ep.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],M=u("Check",B);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M5 12h14",key:"1ays0h"}]],I=u("Minus",L);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],q=u("Plus",S);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],F=u("Trash2",E),V="data:image/svg+xml,%3csvg%20width='194'%20height='216'%20viewBox='0%200%20194%20216'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_f_180_4354)'%3e%3crect%20x='24.1875'%20y='178.94'%20width='124'%20height='12.03'%20fill='%231B3554'/%3e%3c/g%3e%3crect%20x='25.1875'%20y='14.53'%20width='124'%20height='79.1975'%20fill='%23E0E5EC'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M25.1875%2014.53V134.83H5.1875V62.0852L15.1891%2046.6966L25.1875%2014.53Z'%20fill='%23CFD4DC'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M148.188%2014.53V134.83H168.188V62.0852L158.186%2046.6966L148.188%2014.53Z'%20fill='%23CFD4DC'/%3e%3cpath%20d='M5.1875%2061.6475H168.188V198C168.188%20200.761%20165.949%20203%20163.188%20203H10.1875C7.42608%20203%205.1875%20200.761%205.1875%20198V61.6475Z'%20fill='white'/%3e%3cpath%20opacity='0.5'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M54.1875%20117.332C54.1875%20116.632%2054.5467%20115.98%2055.1685%20115.658C56.5521%20114.942%2059.196%20113.778%2061.7653%20113.778C64.3337%20113.778%2066.9021%20114.941%2068.2403%20115.658C68.8433%20115.981%2069.1875%20116.619%2069.1875%20117.303C69.1875%20118.917%2067.3273%20119.975%2065.8088%20119.427C64.5938%20118.99%2063.1665%20118.636%2061.7275%20118.636C60.2599%20118.636%2058.7922%20119.004%2057.5471%20119.454C56.0314%20120.001%2054.1875%20118.943%2054.1875%20117.332Z'%20fill='%231B3554'/%3e%3cpath%20opacity='0.5'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M105.188%20117.332C105.188%20116.632%20105.547%20115.98%20106.168%20115.658C107.552%20114.942%20110.196%20113.778%20112.765%20113.778C115.334%20113.778%20117.902%20114.941%20119.24%20115.658C119.843%20115.981%20120.188%20116.619%20120.188%20117.303C120.188%20118.917%20118.327%20119.975%20116.809%20119.427C115.594%20118.99%20114.166%20118.636%20112.727%20118.636C111.26%20118.636%20109.792%20119.004%20108.547%20119.454C107.031%20120.001%20105.188%20118.943%20105.188%20117.332Z'%20fill='%231B3554'/%3e%3cellipse%20opacity='0.5'%20cx='87.1875'%20cy='137.84'%20rx='16'%20ry='7.02054'%20fill='%231B3554'/%3e%3cellipse%20opacity='0.149343'%20cx='50.1875'%20cy='76.685'%20rx='6'%20ry='6.015'%20fill='%231B3554'/%3e%3cellipse%20opacity='0.149343'%20cx='123.188'%20cy='76.685'%20rx='6'%20ry='6.015'%20fill='%231B3554'/%3e%3cpath%20d='M50.1875%2076.3768V39.0913C50.1875%2018.8825%2066.5291%202.5%2086.6875%202.5C106.846%202.5%20123.188%2018.8825%20123.188%2039.0913V76.3768'%20stroke='%235E7085'%20stroke-width='5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20filter='url(%23filter1_d_180_4354)'%3e%3cellipse%20cx='167.788'%20cy='175.532'%20rx='17.6'%20ry='17.644'%20fill='%23E31E25'/%3e%3c/g%3e%3cpath%20d='M174.881%20169.609C175.74%20170.47%20175.74%20171.866%20174.881%20172.727L171.618%20175.998L174.881%20179.268C175.81%20180.2%20175.81%20181.71%20174.881%20182.642C173.952%20183.573%20172.445%20183.573%20171.516%20182.642L168.253%20179.371L164.991%20182.642C164.132%20183.503%20162.74%20183.503%20161.881%20182.642C161.022%20181.781%20161.022%20180.385%20161.881%20179.524L165.144%20176.253L161.881%20172.982C160.952%20172.051%20160.952%20170.541%20161.881%20169.609C162.81%20168.678%20164.316%20168.678%20165.246%20169.609L168.508%20172.88L171.771%20169.609C172.63%20168.748%20174.022%20168.748%20174.881%20169.609Z'%20fill='white'/%3e%3cdefs%3e%3cfilter%20id='filter0_f_180_4354'%20x='0.000555038'%20y='154.753'%20width='172.374'%20height='60.4039'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='BackgroundImageFix'%20result='shape'/%3e%3cfeGaussianBlur%20stdDeviation='12.0935'%20result='effect1_foregroundBlur_180_4354'/%3e%3c/filter%3e%3cfilter%20id='filter1_d_180_4354'%20x='142.188'%20y='151.888'%20width='51.1992'%20height='51.288'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'%20result='hardAlpha'/%3e%3cfeOffset%20dy='2'/%3e%3cfeGaussianBlur%20stdDeviation='4'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%201%200%200%200%200%200.415686%200%200%200%200%200.596078%200%200%200%200.3%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow_180_4354'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow_180_4354'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e";function g(){const{t:l,i18n:s}=p();return e.jsxs("div",{className:"no-product",children:[e.jsx("img",{src:V,alt:"bag-image"}),e.jsxs("div",{className:"no-product__desc",children:[e.jsx("p",{className:"no-product__title",children:l("emptyCart")}),e.jsx("p",{className:"no-product__text",children:l("emptyCartText")})]})]})}const G=()=>{var m;const l=C(),{cart:s,loading:a}=j(n=>n.cart),[o,i]=f.useState(!1),[c,t]=f.useState(null),h=()=>{l(y())},r=async(n,d=1)=>{var _;i(!0),t(null);try{await v(n,d),l(y())}catch(x){throw t(((_=x.response)==null?void 0:_.data)||x.message),x}finally{i(!1)}};return{cart:s,cartItems:((m=s==null?void 0:s.data)==null?void 0:m.items)||[],fullCart:s==null?void 0:s.data,getCart:h,addItem:r,loading:o||a,error:c}},H="/assets/table-BP_7fa-I.svg";function P({prod:l,refresh:s}){var n;p();const{id:a,name:o,quantity:i,formatted_price:c,product:t,formatted_total:h}=l,r=async d=>{if(!(d<1))try{await k(a,d),s()}catch(_){console.error("Yangilashda xatolik:",_)}},m=async()=>{try{await N(a),s()}catch(d){console.error("O'chirishda xatolik:",d)}};return e.jsxs("div",{className:"cart-elem",children:[e.jsx("div",{className:"cart-elem__select checked",children:e.jsx(M,{size:16})}),e.jsx("div",{className:"cart-elem__img-wrap",children:e.jsx("img",{src:((n=t==null?void 0:t.base_image)==null?void 0:n.small_image_url)||H,alt:o,style:{width:"100%",height:"100%",objectFit:"contain"}})}),e.jsxs("div",{className:"cart-elem__info",children:[e.jsx("div",{className:"cart-elem__top",children:e.jsxs("div",{className:"cart-elem__price",children:[c,e.jsx("span",{className:"cart-elem__badge",children:"-36%"})]})}),e.jsx("p",{className:"cart-elem__name",children:o}),e.jsxs("p",{className:"cart-elem__code",children:["Mahsulot kodi: ",l.sku||a]})]}),e.jsxs("div",{className:"cart-elem__controls",children:[e.jsxs("div",{className:"qty",children:[e.jsx("button",{className:"qty__btn",onClick:()=>r(i-1),children:e.jsx(I,{size:16})}),e.jsx("span",{className:"qty__num",children:i}),e.jsx("button",{className:"qty__btn",onClick:()=>r(i+1),children:e.jsx(q,{size:16})})]}),e.jsx("button",{className:"del",onClick:m,children:e.jsx(F,{size:20})})]})]})}function O(){const{t:l}=p(),{cart:s,cartItems:a,loading:o,getCart:i}=G(),c=(s==null?void 0:s.data)||s;if(a||c!=null&&c.items,f.useEffect(()=>{i()},[]),o)return e.jsx("div",{className:"loading",children:"Yuklanmoqda..."});const t=s==null?void 0:s.data,h=()=>{b.success("Muvaqqiyatli amalga oshirildi")};return e.jsxs(e.Fragment,{children:[e.jsx(w,{info:{title:l("myCart"),total:(c==null?void 0:c.items_qty)||0}}),a.length>0?e.jsx("div",{className:"basket",children:e.jsxs("div",{className:"basket__wrap",children:[e.jsx("div",{className:"basket__prods",children:a.length>0?a.map(r=>e.jsx(P,{prod:r,refresh:i},r.id)):e.jsx(g,{})}),a.length>0&&e.jsxs("div",{className:"basket__total",children:[e.jsxs("div",{className:"basket__total-top",children:[e.jsx("h2",{className:"basket__total-title",children:"Jami"}),e.jsxs("div",{className:"basket__total-desc",children:[e.jsx("span",{className:"basket__total-desc__text",children:t==null?void 0:t.formatted_grand_total}),e.jsx("span",{className:"basket__total-desc__old",children:"6 045 000 so'm"})]})]}),e.jsx("div",{className:"basket__total-categ",children:e.jsxs("div",{className:"basket__total-categ__text",children:[e.jsx("span",{children:"Savatchadagi mahsulotlar"}),e.jsxs("span",{children:[t==null?void 0:t.items_qty," ta"]})]})}),e.jsx("button",{className:"basket__total-btn",onClick:h,children:"Rasmiylashtirish"})]})]})}):e.jsx(g,{})]})}export{O as default};
